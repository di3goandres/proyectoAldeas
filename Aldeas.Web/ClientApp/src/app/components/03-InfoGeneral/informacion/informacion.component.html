<div class="container">
    <mat-horizontal-stepper [linear]="isLinear" #stepper>

        <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>Información General</ng-template>
                <div class="row">
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Estado del proyecto</mat-label>
                            <mat-select formControlName="estado" [(ngModel)]="infoProyecto.Estatus" required>
                                <mat-option *ngFor="let estado of estados" [value]="estado.value">
                                    {{estado.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Nombre del Proyecto</mat-label>
                            <input matInput placeholder="Nombre del Proyecto" formControlName="firstCtrl"
                                [(ngModel)]="infoProyecto.Nombre" required>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Donante</mat-label>
                            <input matInput formControlName="controlNombre" [(ngModel)]="infoProyecto.Donante"
                                placeholder="Donante" required (change)="ver()">
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Tipo de Financiación</mat-label>
                            <mat-select formControlName="financiacion" [(ngModel)]="infoProyecto.TipoFinanciacion"
                                required>
                                <mat-option *ngFor="let estado of financiacion" [value]="estado.value">
                                    {{estado.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                </div>
                <mat-divider></mat-divider>

                <div class="row">
                    <div class="col-12 centerlabel font-weight-bold"><label>DATOS CONTACTO</label></div>
                </div>

                <div class="row">
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Nombre del Contacto</mat-label>
                            <input matInput placeholder="Nombre Contacto" formControlName="firstCtrl"
                                [(ngModel)]="infoProyecto.NombreDonante" required>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Direccion</mat-label>
                            <input matInput placeholder="Direccion" formControlName="firstCtrl"
                                [(ngModel)]="infoProyecto.Direccion" required>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Email</mat-label>
                            <input matInput formControlName="email" [(ngModel)]="infoProyecto.Email"
                                placeholder="Email" required>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Telefono</mat-label>
                            <input matInput formControlName="telefono" [(ngModel)]="infoProyecto.Telefono"
                                placeholder="Telefono" required>
                        </mat-form-field>
                    </div>

                </div>
                <mat-divider></mat-divider>

                <div class="row">
                    <div class="col-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Líder de Ejecución del Proyecto</mat-label>
                            <input matInput placeholder="Lider Ejecucion" formControlName="firstCtrl"
                                [(ngModel)]="infoProyecto.LiderEjecucion" required>
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Lider de la Coordinacion del Proyecto</mat-label>
                            <input matInput placeholder="Nombre del Proyecto" formControlName="firstCtrl"
                                [(ngModel)]="infoProyecto.LiderCoordinacion" required>
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Comite Técnico del Proyecto</mat-label>
                            <input matInput formControlName="controlNombre" [(ngModel)]="infoProyecto.ComiteTecnico"
                                placeholder="Donante" required>
                        </mat-form-field>
                    </div>

                </div>

                <mat-divider></mat-divider>
                <div class="row">
                    <div class="col-12 centerlabel font-weight-bold"><label>FECHAS PROYECTO</label></div>
                </div>
                <div class="row">
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Requiere Liquidación</mat-label>
                            <mat-select formControlName="requiere" [(ngModel)]="infoProyecto.Requiere" required>
                                <mat-option *ngFor="let item of requiere" [value]="item.value">
                                    {{item.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Fecha de Inicio</mat-label>
                            <input matInput formControlName="fechas" [matDatepicker]="picker"
                                [(ngModel)]="infoProyecto.FechaInicio" ng-keydown="$event.preventDefault();"
                                (dateChange)="Cambio($event)">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker touchUi #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-3">

                        <mat-form-field appearance="fill">
                            <mat-label>Fecha de Finalizacion</mat-label>
                            <input matInput formControlName="fechasFin" [matDatepicker]="pickerEnd"
                                ng-keydown="$event.preventDefault();" (dateChange)="Cambio($event)"
                                [min]="infoProyecto.FechaInicio" [(ngModel)]="infoProyecto.FechaFinaliacion">
                            <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
                            <mat-datepicker touchUi #pickerEnd></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field appearance="fill">
                            <mat-label>Tiempo de Ejecucion</mat-label>
                            <input matInput disabled="true" [value]="tiempo">


                        </mat-form-field>
                    </div>
                </div>

                <mat-divider></mat-divider>
                <div class="row">
                    <div class="col-12 centerlabel font-weight-bold"><label>FECHA DE REUNIONES</label></div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <div class="row">

                            <div class="col-6">
                                <mat-form-field appearance="fill">
                                    <mat-label>Fecha de entrega De informes</mat-label>
                                    <input matInput formControlName="fechas" [matDatepicker]="pickerInformes"
                                        [(ngModel)]="FechaComite" ng-keydown="$event.preventDefault();"
                                        (dateChange)="CambioInformes($event)">
                                    <mat-datepicker-toggle matSuffix [for]="pickerInformes"></mat-datepicker-toggle>
                                    <mat-datepicker touchUi #pickerInformes></mat-datepicker>
                                    <!-- <input type="button" value="Agregar Fecha"/> -->

                                </mat-form-field>
                            </div>
                            <div class="col-6">
                                <input mat-raised-button class="btn mat-focus-indicator btn btn-success pull-right bajar mat-raised-button mat-button-base mat-primary pull-right bajar"
                                 [disabled]="!AgregarInfome"
                             
                                 color="primary"
                                 (click)="AgregarFechaInforme()"
                                 value="Agregar Fecha" />
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="centrarTabla col-4">
                               

                                <table #informes mat-table [dataSource]="dataSourceInformes" class="mat-elevation-z8 estirar">

                            
                                    <!-- Position Column -->
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef> No. </th>
                                        <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                                    </ng-container>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="Fecha">
                                        <th mat-header-cell *matHeaderCellDef> Fecha </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Fecha |date:['yyyy-MM-dd']}}
                                            <button type="button" mat-mini-fab color="primary" aria-label="fecha" 
                                            (click)="eliminarFechaInforme(element)"  >
                                                <mat-icon>delete_outline</mat-icon>
                                              </button> </td>
                                    </ng-container>

                                  
                                    

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>


                            </div>

                        </div>
                    </div>
                    <div class="col-6">
                        <div class="row">

                            <div class="col-6">
                                <mat-form-field appearance="fill">
                                    <mat-label>Fecha de reuniones de Comite</mat-label>
                                    <input matInput formControlName="fechas" [matDatepicker]="pickerreunionComite"
                                        [(ngModel)]="FechaComite" ng-keydown="$event.preventDefault();"
                                        (dateChange)="CambioComite($event)">
                                    <mat-datepicker-toggle matSuffix [for]="pickerreunionComite"></mat-datepicker-toggle>
                                    <mat-datepicker touchUi #pickerreunionComite></mat-datepicker>
                                    <!-- <input type="button" value="Agregar Fecha"/> -->

                                </mat-form-field>
                            </div>
                            <div class="col-6">
                                <input mat-raised-button class="btn mat-focus-indicator btn btn-success pull-right bajar mat-raised-button mat-button-base mat-primary pull-right bajar"
                                 [disabled]="!agregarComite"
                             
                                 color="primary"
                                 (click)="agregarFechaComite()"
                                 value="Agregar Fecha" />
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="centrarTabla col-4">
                               

                                <table #reuniones mat-table [dataSource]="dataSourceComites" class="mat-elevation-z8 estirar">

                            
                                    <!-- Position Column -->
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef> No. </th>
                                        <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                                    </ng-container>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="Fecha">
                                        <th mat-header-cell *matHeaderCellDef> Fecha </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Fecha |date:['yyyy-MM-dd']}}
                                            <button type="button" mat-mini-fab color="primary" aria-label="fecha" 
                                            (click)="eliminarfechaComite(element)"  >
                                                <mat-icon>delete_outline</mat-icon>
                                              </button> </td>
                                    </ng-container>

                                  
                                    

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>


                            </div>

                        </div>
                    </div>
                </div>


                <mat-divider></mat-divider>

                <div>

                    <button mat-button matStepperNext>Next</button>
                </div>
            </form>
        </mat-step>
        <mat-step [stepControl]="secondFormGroup">
            <form [formGroup]="secondFormGroup">
                <ng-template matStepLabel>Información Financiera</ng-template>
                <mat-form-field>
                    <mat-label>Address</mat-label>
                    <input matInput formControlName="secondCtrl" placeholder="Ex. 1 Main St, New York, NY" required>
                </mat-form-field>

                <div>
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </form>
        </mat-step>
        <mat-step [stepControl]="thirdFormGroup">
            <form [formGroup]="thirdFormGroup">
                <ng-template matStepLabel>Participantes Proyectados</ng-template>
                <mat-form-field>
                    <mat-label>Address</mat-label>
                    <input matInput formControlName="thirdCtrl" placeholder="Ex. 1 Main St, New York, NY" required>
                </mat-form-field>
                <div>
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </form>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Done</ng-template>
            <p>You are now done.</p>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button (click)="stepper.reset()">Reset</button>
            </div>
        </mat-step>
    </mat-horizontal-stepper>
</div>